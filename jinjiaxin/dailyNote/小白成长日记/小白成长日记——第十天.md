# 小白成长日记——第十一天
**我变强了，也要秃了**
## TCP服务器
###　server.js

```
"use strict";
var net = require("net");
var clientList = [];
var count = 0;

var server = net.createServer(function(socket){
  clientList.push(socket);
  count++;
  console.log(count);
  socket.write("success!\r\n");
  //socket.pipe(socket);
  socket.on("data",function(data){
    console.log(data.toString());
    //socket.write(data);
    broadcast(data);
    });

    socket.on('end', function(){
      console.log('connection closed');
      var index = clientList.indexOf(socket);
      clientList.splice(index, 1);
      });


      });
      function broadcast(data){
        for(var i = 0; i < clientList.length; i++){
          clientList[i].write(data);
        }
      }
      server.listen(8080,"127.0.0.1");
```
### client.js

      "use strict";
      var net = require("net");
      var hostname = process.argv[2];
      var port = process.argv[3];
    
      var client = net.connect({host:hostname,port:port},
        function(){
          console.log("connected to server!");
          process.stdin.setEncoding("utf8");
    
          process.stdin.on("readable",function(){
          var chunk = process.stdin.read();
          if(chunk != null){
          client.write("data: " + chunk);
          }
          });
    
          });
    
          client.on("data",function(data){
          console.log(data.toString());
          });


          client.on("end",function(){
          console.log("disconnected from server");
          reconnect();
          });
          ```
