# AJAX学习

1. 简介:是与服务器交换数据的技术,它在不重载全部页面的情况下,实现了对部分页面的更新

2. AJAX基础-创建XMLHttpRequest对象

   1. 浏览器兼容(现有浏览器IE7+ 、Firefox、Chrome、Safari以及Opera均内建XMLHttpRequest对象,老版本的IE5和IE6使用ActiveX对象)

      1. ```
         var xmlhttp;
         if(window.XMLHttpRequest){
         //IE7+,Firefox,Chrome,Opera,Safari浏览器执行代码
         xmlhttp=new XMLHttpRequest();
         }
         else{
         //IE5,IE6浏览器执行代码
         xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
         }
         ```

3. AJAX-向服务器发送请求

   1. xmlhttp.open("GET","ajax_info.txt",true);规定请求的类型;true为异步false为同步

      xmlhttp.send();//将请求发送到服务器

   2. GET或POST

      1. 使用POST请求的情况：
         1. 无法使用缓存文件(更新服务器上的文件或数据库)
         2. 向服务器发送大量数据(POST没有数据量限制)
         3. 发送包含未知字符的用户输入时，POST比GET更稳定也更可靠

   3. readState改变触发onreadystatechange事件

      1. 0:请求未初始化（还未调用open())
      2. 1：服务器连接已建立(还没有调用send())
      3. 2：请求已接收(通常现在可以从响应中获取内容头)
      4. 3：请求处理中(通常响应中已有部分数据可用了，但是服务器还没有完成响应的生成)
      5. 4：请求已完成，且响应已就绪（您可以获取并使用服务器的响应了）

   4. URL中添加唯一ID避免缓存 Math.random()；

   5. Post请求的两种编码格式：

      1. Content-Type:application/x-www-form-urlencoded，参数格式：key=value&key=value（将键值对的参数用&链接起来，如果有空格，将空格转换为+加号；有特殊符号，将特殊符号转换为ASCII HEX值）
      2. Content-Type：multipart/form-data，不会对参数编码

   6. GET请求

      1. ```
         xmlhttp.open("GET","/try/ajax/demo_get2.php?fname=Henry&lname=Ford",true);
         xmlhttp.send();
         ```

   7. POST请求

      1. ```
         xmlhttp.open("POST","/try/ajax/demo_post2.php",true);
         xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
         xmlhttp.send("fname=Henry&lname=Ford");
         ```

      2. setRequestHeader（）添加HTTP头，然后在send()方法中规定希望发送的数据。

   8. AJAX-服务器响应

      1. 获取服务器的响应，XMLHttpRequest对象的responseText或responseXML属性
         1. responseText获取字符串形式的响应数据
         2. responseXML获取XML形式的响应数据

